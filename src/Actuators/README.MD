# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ main.cpp                          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ Core/
‚îÇ   ‚îî‚îÄ‚îÄ Types.h                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∏–Ω–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Communication/
‚îÇ   ‚îú‚îÄ‚îÄ ESPNowManager.h              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π —Å–≤—è–∑—å—é
‚îÇ   ‚îî‚îÄ‚îÄ ESPNowManager.cpp
‚îî‚îÄ‚îÄ Actuators/
    ‚îú‚îÄ‚îÄ ServoManager.h               # –ì–ª–∞–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –≤—Å–µ—Ö —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤
    ‚îú‚îÄ‚îÄ ServoManager.cpp
    ‚îú‚îÄ‚îÄ ServoGroup.h                 # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞
    ‚îî‚îÄ‚îÄ ServoGroup.cpp
```

## üéØ –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –ø–∏–Ω –≤ Types.h

```cpp
// –í —Ñ–∞–π–ª–µ Core/Types.h
struct HardwareConfig {
    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∏–Ω—ã...
    static const uint8_t ELEVATOR_PIN = 12;
    static const uint8_t RUDDER_PIN = 14;
    static const uint8_t AILERON_PIN = 15;
    
    // –ù–û–í–´–ô –ü–ò–ù - –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞–∫—Ä—ã–ª–∫–æ–≤ (flaps)
    static const uint8_t FLAPS_PIN = 16;
    
    static const uint8_t MOTOR_PIN = 13;
    static const uint8_t LED_PIN = 2;
};
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ –≤ ServoManager.h

```cpp
// –í —Ñ–∞–π–ª–µ Actuators/ServoManager.h
class ServoManager {
private:
    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã...
    ServoGroup elevatorServo;
    ServoGroup rudderServo;
    ServoGroup aileronServo;
    
    // –ù–û–í–´–ô —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥
    ServoGroup flapsServo;
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞
    static const int FLAPS_MIN = 0;        // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É–≥–æ–ª
    static const int FLAPS_MAX = 90;       // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É–≥–æ–ª  
    static const int FLAPS_NEUTRAL = 0;    // –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
};
```

### –®–∞–≥ 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ ServoManager.cpp

```cpp
// –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ ServoManager (–≤ ServoManager.cpp)
ServoManager::ServoManager()
    : elevatorServo(HardwareConfig::ELEVATOR_PIN, ELEVATOR_MIN, ELEVATOR_MAX, ELEVATOR_NEUTRAL, "ELEVATOR"),
      rudderServo(HardwareConfig::RUDDER_PIN, RUDDER_MIN, RUDDER_MAX, RUDDER_NEUTRAL, "RUDDER"),
      aileronServo(HardwareConfig::AILERON_PIN, AILERON_MIN, AILERON_MAX, AILERON_NEUTRAL, "AILERON"),
      // –ù–û–í–´–ô —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥
      flapsServo(HardwareConfig::FLAPS_PIN, FLAPS_MIN, FLAPS_MAX, FLAPS_NEUTRAL, "FLAPS")
{
}

// –í –º–µ—Ç–æ–¥–µ begin()
void ServoManager::begin() {
    // –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...
    elevatorServo.begin();
    rudderServo.begin(); 
    aileronServo.begin();
    
    // –ù–û–í–ê–Ø –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    flapsServo.begin();
}

// –í –º–µ—Ç–æ–¥–µ testSequence()
void ServoManager::testSequence() {
    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã...
    elevatorServo.testSequence();
    rudderServo.testSequence();
    aileronServo.testSequence();
    
    // –ù–û–í–´–ô —Ç–µ—Å—Ç
    flapsServo.testSequence();
}
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –º–µ—Ç–æ–¥ update()

```cpp
// –í –º–µ—Ç–æ–¥–µ update() –≤ ServoManager.cpp
void ServoManager::update(const ControlData& data) {
    // –°—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...
    
    // –ù–û–í–û–ï —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ - –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–∫—Ä—ã–ª–∫–∏ –ø–æ –∫–Ω–æ–ø–∫–µ 1
    if (data.button1) {
        flapsServo.write(FLAPS_MAX);  // –ü–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø—É—Å—Ç–∏—Ç—å –∑–∞–∫—Ä—ã–ª–∫–∏
    } else {
        flapsServo.write(FLAPS_MIN);  // –£–±—Ä–∞—Ç—å –∑–∞–∫—Ä—ã–ª–∫–∏
    }
    
    // –ò–ª–∏ –∞–Ω–∞–ª–æ–≥–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –æ—Å–∏ Y –≤—Ç–æ—Ä–æ–≥–æ –¥–∂–æ–π—Å—Ç–∏–∫–∞)
    // int flapsAngle = map(data.yAxis2, -512, 512, FLAPS_MIN, FLAPS_MAX);
    // flapsServo.write(flapsAngle);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–≤–æ–¥ –≤ Serial
    static unsigned long lastPrint = 0;
    if (millis() - lastPrint > 500) {
        Serial.print("üéÆ Elevator:");
        Serial.print(elevatorAngle);
        Serial.print("¬∞ Rudder:");
        Serial.print(rudderAngle); 
        Serial.print("¬∞ Aileron:");
        Serial.print(aileronAngle);
        Serial.print("¬∞ Flaps:");
        Serial.print(data.button1 ? FLAPS_MAX : FLAPS_MIN);  // –ù–û–í–´–ô –≤—ã–≤–æ–¥
        Serial.println("¬∞");
        lastPrint = millis();
    }
}
```

## üéÆ –ü—Ä–∏–º–µ—Ä—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–Ω—ã–º–∏ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏

### 1. **–ó–∞–∫—Ä—ã–ª–∫–∏ (Flaps)** - –ø–æ –∫–Ω–æ–ø–∫–µ
```cpp
// –ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ - –∫–Ω–æ–ø–∫–∞ –≤–∫–ª/–≤—ã–∫–ª
if (data.button1) {
    flapsServo.write(FLAPS_MAX);
} else {
    flapsServo.write(FLAPS_MIN);
}
```

### 2. **–®–∞—Å—Å–∏ (Landing Gear)** - –ø–æ –∫–Ω–æ–ø–∫–µ —Å –¥–≤—É–º—è –ø–æ–ª–æ–∂–µ–Ω–∏—è–º–∏
```cpp
// 0¬∞ - —É–±—Ä–∞–Ω–æ, 90¬∞ - –≤—ã–ø—É—â–µ–Ω–æ
if (data.button2) {
    landingGearServo.write(90);
} else {
    landingGearServo.write(0);
}
```

### 3. **–¢—Ä–∏–º–º–µ—Ä—ã (Trimmers)** - –ø–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –æ—Å—è–º
```cpp
// –ü–ª–∞–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∏–º–º–µ—Ä–æ–º —Ä—É–ª—è –≤—ã—Å–æ—Ç—ã
int elevatorTrim = map(data.yAxis2, -512, 512, TRIM_MIN, TRIM_MAX);
elevatorTrimServo.write(elevatorTrim);
```

### 4. **–°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω–æ–π**
```cpp
// –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
ServoGroup safeServo(HardwareConfig::SOME_PIN, 30, 150, 90, "SAFE_SERVO");
```

## üîß –ë—ã—Å—Ç—Ä—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞

### 1. **–í Types.h:**
```cpp
static const uint8_t NEW_SERVO_PIN = 16;
```

### 2. **–í ServoManager.h:**
```cpp
ServoGroup newServo;
static const int NEW_SERVO_MIN = 0;
static const int NEW_SERVO_MAX = 180; 
static const int NEW_SERVO_NEUTRAL = 90;
```

### 3. **–í ServoManager.cpp:**
```cpp
// –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ:
newServo(HardwareConfig::NEW_SERVO_PIN, NEW_SERVO_MIN, NEW_SERVO_MAX, NEW_SERVO_NEUTRAL, "NEW_SERVO")

// –í begin():
newServo.begin();

// –í testSequence():
newServo.testSequence();

// –í update():
int newServoAngle = map(data.axis, -512, 512, NEW_SERVO_MIN, NEW_SERVO_MAX);
newServo.write(newServoAngle);
```

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫—Ä—ã–ª–∫–æ–≤

```
üöÄ START ServoManager
üöÄ INIT ELEVATOR Servo
üöÄ INIT RUDDER Servo
üöÄ INIT AILERON Servo  
üöÄ INIT FLAPS Servo        <-- –ù–û–í–´–ô —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥
üß™ START Complete Servo Test Sequence
üß™ TEST ELEVATOR
üß™ TEST RUDDER
üß™ TEST AILERON
üß™ TEST FLAPS              <-- –ù–û–í–´–ô —Ç–µ—Å—Ç
üéÆ Elevator:84¬∞ Rudder:90¬∞ Aileron:45¬∞ Flaps:0¬∞    <-- –ù–û–í–´–ô –≤—ã–≤–æ–¥
```
